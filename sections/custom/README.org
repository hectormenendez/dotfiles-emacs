* [[./custom#customization][Customization]]
Variables, functions and commands that should not be included if you're not me.

** window-toggle
Toggle current buffer using the whole screen.
#+BEGIN_SRC emacs-lisp
  (defun etor/window-toggle ()
      "Allows to maximize current buffer"
      (interactive)
      (if (= 1 (length (window-list)))
          (jump-to-register '_)
          (progn
              (window-configuration-to-register '_)
              (delete-other-windows)
          )
      )
  )
#+END_SRC

** frame-load
Loads frame configuration settings from file (if available).
#+BEGIN_SRC emacs-lisp
  (defun etor/frame-load ()
      "Load last frame geometry from a a file."
      (interactive)
      (let
          (
              (framesave-file (expand-file-name "_framesave" user-emacs-directory))
          )
          (when (file-readable-p framesave-file) (load-file framesave-file))
      )
  )

#+END_SRC

** frame-save
Writes frame configuration settings to a file (so they can be later loaded).
#+BEGIN_SRC emacs-lisp
  ;; TODO: In Mac, save Desktop Name (or identifier)
  (defun etor/frame-save ()
      "Save current frame geometry to a file."
      (interactive)
      (let
          (
              (framesave-left (frame-parameter (selected-frame) 'left))
              (framesave-top (frame-parameter (selected-frame) 'top))
              (framesave-width (frame-parameter (selected-frame) 'width))
              (framesave-height (frame-parameter (selected-frame) 'height))
              (framesave-file (expand-file-name "_framesave" user-emacs-directory))
          )
          (when (not (number-or-marker-p framesave-left)) (setq framesave-left 0))
          (when (not (number-or-marker-p framesave-top)) (setq framesave-top 0))
          (when (not (number-or-marker-p framesave-width)) (setq framesave-width 0))
          (when (not (number-or-marker-p framesave-height)) (setq framesave-height 0))
          (with-temp-buffer
              (insert
                  "(setq initial-frame-alist '(\n"
                  (format "    (top . %d)\n" (max framesave-top 0))
                  (format "    (left . %d)\n" (max framesave-left 0))
                  (format "    (width . %d)\n" (max framesave-width 0))
                  (format "    (height . %d)\n" (max framesave-height 0))
                  "))\n"
              )
              (when (file-writable-p framesave-file) (write-file framesave-file))
          )
      )

(defun etor/backspace-to-tab-stop ()
    "Delete whitespace backwards to the next tab-stop, otherwise delete one character."
    (interactive)
    (if
        (or indent-tabs-mode
            (region-active-p)
            (save-excursion
                (> (point) (progn (back-to-indentation) (point)))
            ))
        (call-interactively 'backward-delete-char-untabify)
        (let
            ((movement (% (current-column) tab-width)) (p (point)))
            (when (= movement 0) (setq movement tab-width))
            ;; Account for edge case near beginning of buffer
            (setq movement (min (- p 1) movement))
            (save-match-data
                (if
                    (string-match "[^\t ]*\\([\t ]+\\)$"
                        (buffer-substring-no-properties (- p movement) p)
                    )
                    (backward-delete-char (- (match-end 1) (match-beginning 1)))
                    (call-interactively 'backward-delete-char)
                )
            )
        )
    )
)   )

#+END_SRC
